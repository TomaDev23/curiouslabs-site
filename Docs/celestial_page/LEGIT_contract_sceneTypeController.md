# LEGIT_contract_sceneTypeController.md

## ğŸ“„ Component Contract: Scene Type Controller

### ğŸ†” Identifier
- `id`: `scene_type_controller`
- `scs`: `SCS-SCENE-CONTROL-001`
- `type`: `controller`
- `doc`: `LEGIT_contract_sceneTypeController.md`

---

## ğŸ§© Purpose

This component is responsible for **determining and propagating the current scene state** (e.g., `dormant`, `awakening`, `cosmicReveal`, `cosmicFlight`) based on **scroll position**, and providing that state to all celestial components via context.

The `sceneType` governs:
- Visibility of planets
- Animation triggers
- Styling transitions
- Parallax mode selection
- Debug display

---

## âš™ï¸ Interfaces

### Hook: `useSceneTypeFromScroll(scrollProgress: number): string`

- Accepts a `scrollProgress` value between 0.0 and 1.0
- Returns one of the following scene types:
  - `'dormant'`
  - `'awakening'`
  - `'cosmicReveal'`
  - `'cosmicFlight'`

---

## ğŸ“¦ Data Model

### `sceneType` (string)
- Controlled by scroll position
- Shared via `CelestialContext`
- Updated reactively on scroll change

---

## ğŸ§  Logic Requirements

- Scroll mapping must be **modular** and **centralized**
- SceneType must be consistent and accessible throughout render chain
- Hooks consuming `sceneType` must re-render on transition
- SceneType transitions must avoid flicker or debounce stutter

---

## ğŸ” Visual Requirements

| Scene | Trigger Scroll % | Expected Transitions |
|-------|------------------|----------------------|
| dormant | 0â€“19% | Planets hidden or faded |
| awakening | 20â€“39% | Moon/Mars active, low glow |
| cosmicReveal | 40â€“59% | All major planets begin reveal |
| cosmicFlight | 60â€“100% | Full motion, glow, transitions active |

---

## ğŸ› ï¸ Integration Points

- `CelestialController.jsx`  
- `useCelestialParallax.jsx`  
- `CelestialContext.jsx`  
- `SceneDebugHUD.jsx` (if present)  
- All `<CelestialBody />` components (Moon, Mars, etc.)

---

## âœ… Completion Criteria

- [ ] `useSceneTypeFromScroll` hook implemented and tested
- [ ] `sceneType` set and stored in `CelestialContext`
- [ ] Consumed by at least two active planets (e.g., Moon, Mars)
- [ ] Verified visual difference across all 4 scenes
- [ ] Logged or displayed via HUD
- [ ] Fully covered in test route (`/dev/combined-parallax-test`)
- [ ] LEGIT metadata present in controller + hook files

---

## ğŸ§¾ Metadata Example (CelestialController.jsx)

```js
export const metadata = {
  id: 'scene_type_controller',
  scs: 'SCS-SCENE-CONTROL-001',
  type: 'controller',
  doc: 'LEGIT_contract_sceneTypeController.md'
};
```

---

## ğŸ“˜ Related Contracts

* `contract_celestial_controller.md`
* `contract_hooks_celestial.md`
* `contract_hooks_combined_parallax.md`
* `contract_routes_dev.md`

---

## ğŸ” Author

Commander Tom / CuriousLabs HQ
Generated by Mission Control (ChatGPT) 