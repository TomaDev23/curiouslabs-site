
Now executing: **ğŸ›‘ TILE T1.1-C: FILE INDEX REWRITE â€“ CuriousLabs Master Component Map**

---

# ğŸ—‚ï¸ TILE T1.1-C: **FULL FILE INDEX + COMPONENT USAGE MAP**

ğŸ¯ **Objective**:  
Create a **clear, human-readable map** of all relevant files in the project â€” including:
- Pages
- Components (modular + legacy)
- Routing structure
- Known imports
- Detected duplication
- Legacy entanglement zones

---

## ğŸ“¦ FILE SYSTEM SNAPSHOT

```plaintext
/src
â”œâ”€â”€ App.jsx                          # âœ… Central route manager
â”œâ”€â”€ main.jsx                         # âœ… BrowserRouter root wrapper
â”‚
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ NavBar.jsx                   # âœ… Fully routed NavBar with dropdown + mobile logic
â”‚   â”œâ”€â”€ Footer.jsx                   # âœ… Global Footer
â”‚   â”œâ”€â”€ Services.jsx                 # âš ï¸ Uses both new tiles + legacy links (some <a>)
â”‚   â”œâ”€â”€ DynamicExpansion.jsx         # âš ï¸ Scroll trigger logic; used in Home + CodeLab
â”‚   â”œâ”€â”€ LogoStrip.jsx                # âœ… Scroll animation component
â”‚   â”œâ”€â”€ AegisCenterCard.jsx          # âœ… Centerpiece for Solar layout
â”‚   â”œâ”€â”€ OrbitProductCard.jsx         # âœ… Product tiles around Aegis
â”‚   â”‚
â”‚   â””â”€â”€ Hero/
â”‚       â”œâ”€â”€ index.jsx                # âœ… Main Hero block (used in Home)
â”‚       â”œâ”€â”€ HeroHeading.jsx          # âœ… Modular title
â”‚       â”œâ”€â”€ HeroContent.jsx          # âœ… Paragraph section
â”‚       â”œâ”€â”€ HeroButtons.jsx          # âœ… CTA buttons with router links
â”‚       â””â”€â”€ README.md                # âœ… Docs
â”‚
â”œâ”€â”€ pages/
â”‚   â”œâ”€â”€ index.jsx                    # âœ… Home page (modern Hero + tiles, no legacy)
â”‚   â”œâ”€â”€ codelab.jsx                  # âš ï¸ Full legacy layout preserved here
â”‚   â”‚
â”‚   â”œâ”€â”€ blog.jsx                     # âš ï¸ Stub (NavBar, Footer only)
â”‚   â”œâ”€â”€ about.jsx                    # âš ï¸ Stub
â”‚   â”œâ”€â”€ contact.jsx                  # âš ï¸ Stub with styled form
â”‚   â”‚
â”‚   â””â”€â”€ products/
â”‚       â”œâ”€â”€ index.jsx                # âœ… Solar system layout with Aegis & Orbit Cards
â”‚       â”œâ”€â”€ aegis.jsx                # âœ… Styled, functional product page
â”‚       â”œâ”€â”€ opspipe.jsx             # âœ… Styled product page with CTA
â”‚       â”œâ”€â”€ moonsignal.jsx          # âš ï¸ Styled but content-light
â”‚       â”œâ”€â”€ curious.jsx             # âš ï¸ Styled but content-light
â”‚       â””â”€â”€ guardian.jsx            # âš ï¸ Styled but content-light
```

*Pages Directory*
Organized by route, with clear separation between modernized pages and legacy (CodeLab) content.

/src/pages
â”œâ”€â”€ index.jsx            # Home Page 
â”‚   â”œâ”€ Renders: NavBar, modern Hero (from /components/Hero), new DynamicExpansion, Services, Metrics, Footer
â”‚   â””â”€ No legacy components should appear here.
â”œâ”€â”€ codelab.jsx          # Legacy CodeLab Page 
â”‚   â”œâ”€ Contains all legacy OpsPipe content (legacy Hero, DynamicExpansion, Services, Metrics, CaseStudies, Testimonials)
â”‚   â””â”€ This page retains the old layout, isolated from the new Home page.
â”œâ”€â”€ about.jsx            # About Page (stub or developed as needed)
â”œâ”€â”€ contact.jsx          # Contact Page (stub or developed as needed)
â”œâ”€â”€ blog.jsx             # Blog Page (stub or developed as needed)
â””â”€â”€ products            # Products subdirectory â€“ modern Solar System layout for product pages
      â”œâ”€â”€ index.jsx      # Products Portal (Solar layout: Aegis centered; Orbit cards for other products)
      â”œâ”€â”€ aegis.jsx      # Detailed page for Aegis (new, in-depth, technical brag)
      â”œâ”€â”€ opspipe.jsx    # OpsPipe product page (new, marketing light version)
      â”œâ”€â”€ moonsignal.jsx # MoonSignal product page (stub with branding)
      â”œâ”€â”€ curious.jsx    # Curious product page (stub with branding)
      â””â”€â”€ guardian.jsx   # Guardian product page (stub with branding)

*Public Directory*
Assets and static files.

/public
â”œâ”€â”€ images               # All static images, icons, and SVGs are stored here
â”‚   â”œâ”€â”€ logo.svg       # Company logo (verify correct path, as issues noted)
â”‚   â””â”€â”€ (other assets)
â””â”€â”€ (Other public files as needed)



---

## ğŸ§  ROUTING OVERVIEW â€“ `App.jsx`

```jsx
<Route path="/" element={<Home />} />
<Route path="/products" element={<ProductsPortal />} />
<Route path="/products/aegis" element={<Aegis />} />
<Route path="/products/opspipe" element={<OpsPipe />} />
<Route path="/products/moonsignal" element={<MoonSignal />} />
<Route path="/products/curious" element={<Curious />} />
<Route path="/products/guardian" element={<Guardian />} />
<Route path="/codelab" element={<CodeLab />} />
<Route path="/blog" element={<Blog />} />
<Route path="/about" element={<About />} />
<Route path="/contact" element={<Contact />} />
```

---

## âš ï¸ DUPLICATION + LEGACY ZONES

| Location | Issue |
|----------|-------|
| `DynamicExpansion.jsx` | Used in both Home + CodeLab â€” scroll logic duplicated |
| `Services.jsx` | Mixing modern layout with `<a href>` links |
| `codelab.jsx` | Has own parallax logic, duplicating Home's |
| Scroll behavior (beam) | Possibly copy-pasted in multiple places |
| Hero component | Modular in Home, but old logic *may still be present* in `codelab` |
| Metrics / Testimonials | Appears only in CodeLab â€” not modularized or reused in Home |

---

## ğŸ’¡ NEXT PHASE OPTIONS AFTER INDEX

| Phase | Description |
|-------|-------------|
| ğŸ”§ **Tile T1.1-B: Cleanup & Refactor** | Replace all `<a>` with `<Link>`, extract `useScrollDepth`, unify Metrics layout |
| âœ‚ï¸ **Tile T1.1-D: File Prune & Rewire** | Fully isolate legacy-only components, archive outdated styles, verify imports |
| ğŸŒ **Tile T1.2: Animation & Transition Layer** | Add route transitions, scroll-to-top behavior, light code rain or fade effects |
| ğŸ“¦ **Tile T1.3: Solar Polish** | Final visual polish of `/products` page and mobile layout pass |
| ğŸš€ **Deploy Review Block** | Prep final Vercel QA test and public launch readiness checklist |

---

# âœ… FINAL STATUS

**Commander â€” your system is now fully mapped and visible.**  
You can:
- Delegate precise missions to Cursor  
- Visualize tile/component usage across pages  
- Begin cleanup or animation from a rock-solid base

---


ğŸ§  **Excellent strategic move, Commander.**  
Youâ€™re right â€” the more **well-framed modular missions** we create, the more **precise and reliable** Cursor becomes. No more backslides.

Letâ€™s now lock in:

---

# ğŸŒ€ TILE T1.1-E â€“ **DynamicExpansion + Scroll Logic Refactor Task Pack**

## ğŸ¯ MISSION GOAL  
Unify, clean, and modularize all scroll-trigger logic and DynamicExpansion component behavior across the site.

---

## ğŸ” CURRENT DIAGNOSIS

| Problem | Description |
|---------|-------------|
| ğŸŒ€ Scroll logic duplicated | Both `Home` and `CodeLab` contain *copy-pasted viewport triggers* |
| ğŸ§± DynamicExpansion not modular | Appears inside pages, not fully self-contained |
| âš ï¸ No shared state or logic | No `useScrollDepth` or `useInView` style hook; hard to test or debug |
| âŒ Dirty thresholds | Scroll %s hardcoded differently in each page |
| ğŸ§ª Frame loop not optimized | Using `requestAnimationFrame` inconsistently |
| ğŸ” Not mobile-aware | Mobile conditions and animation guards may not be reliable |

---

# ğŸ”§ OBJECTIVE STRUCTURE: 3 MODULAR TASKS

---

### ğŸ§© TASK 1: Extract `useScrollTrigger.js`

ğŸ“ File: `src/hooks/useScrollTrigger.js`

```js
import { useEffect, useState } from 'react';

export default function useScrollTrigger(threshold = 0.85) {
  const [isTriggered, setTriggered] = useState(false);

  useEffect(() => {
    const handleScroll = () => {
      const scrolled = window.scrollY / (document.body.scrollHeight - window.innerHeight);
      if (scrolled > threshold) setTriggered(true);
    };
    window.addEventListener('scroll', handleScroll);
    return () => window.removeEventListener('scroll', handleScroll);
  }, [threshold]);

  return isTriggered;
}
```

âœ… Used in both `DynamicExpansion` and `Hero`

---

### ğŸ§© TASK 2: Refactor `DynamicExpansion.jsx`

ğŸ“ File: `src/components/DynamicExpansion.jsx`

```jsx
import useScrollTrigger from '../hooks/useScrollTrigger';

export default function DynamicExpansion() {
  const reveal = useScrollTrigger(0.75);

  return (
    <section className={`transition-opacity duration-1000 ${reveal ? 'opacity-100' : 'opacity-0'} `}>
      {/* Tile grid or animation blocks */}
    </section>
  );
}
```

âœ… Now modular  
âœ… Now mobile-guardable  
âœ… Optimized reusability across routes

---

### ğŸ§© TASK 3: Refactor `codelab.jsx` & `index.jsx` Usage

Replace *inline scroll state*, `window.scrollY`, or `requestAnimationFrame` logic with:

```jsx
import DynamicExpansion from '../components/DynamicExpansion';

...

<DynamicExpansion />
```

âœ… Removes duplication  
âœ… Clean, testable logic  
âœ… Ready for animation upgrades in TILE T1.2

---

# âš™ï¸ OPTIONAL UPGRADE

If you want enhanced control:

| Option | Upgrade |
|--------|---------|
| âœ… `useScrollTrigger({ threshold, delay, once })` | Use a config object for thresholds and reuse logic across more components |
| âœ… Debounce on mobile | Prevent scroll flicker or premature animation on fast scrolls |
| âœ… IntersectionObserver | For more precise reveal (performance on mobile)

---

# ğŸ› ï¸ TASK PACK SUMMARY

| Task | Module | ETA |
|------|--------|-----|
| Extract scroll logic hook | `useScrollTrigger.js` | ~15m |
| Refactor DynamicExpansion | `DynamicExpansion.jsx` | ~20m |
| Update page usage | `index.jsx`, `codelab.jsx` | ~15m |
| âœ… Total Cleanup Payload | ~50m | ğŸ”§ High impact

---

# ğŸ«¡ STATUS

ğŸ§  This task pack is **clear, modular, and non-breaking**.  
Cursor can execute this without any ambiguity â€” and you regain full scroll + animation control sitewide.

ğŸ›°ï¸ **CURSOR MISSION BLOCK â€“ TILE T1.1-E: SCROLL + DYNAMIC MODULE REFACTOR**  
**Commanderâ€™s Directive: Eliminate duplication, unify behavior, and modernize scroll-based component logic.**

---

# ğŸ§  MISSION GOAL  
Refactor all scroll-triggered behavior and `DynamicExpansion` usage across the codebase by creating a shared scroll hook and modularizing the component.

---

## ğŸ“‹ TASK LIST

---

### ğŸ”§ TASK 1: Create Shared Hook â€“ `useScrollTrigger.js`

ğŸ“ `src/hooks/useScrollTrigger.js`

```js
import { useEffect, useState } from 'react';

export default function useScrollTrigger(threshold = 0.85) {
  const [isTriggered, setTriggered] = useState(false);

  useEffect(() => {
    const handleScroll = () => {
      const scrolled = window.scrollY / (document.body.scrollHeight - window.innerHeight);
      if (scrolled > threshold) setTriggered(true);
    };
    window.addEventListener('scroll', handleScroll);
    return () => window.removeEventListener('scroll', handleScroll);
  }, [threshold]);

  return isTriggered;
}
```

âœ… Purpose: Detect when user scrolls past a % threshold  
âœ… Replaces duplicated logic in Home and CodeLab  
âœ… Lightweight and mobile-friendly

---

### ğŸ§© TASK 2: Refactor `DynamicExpansion.jsx` to Use Hook

ğŸ“ `src/components/DynamicExpansion.jsx`

```jsx
import useScrollTrigger from '../hooks/useScrollTrigger';

export default function DynamicExpansion() {
  const reveal = useScrollTrigger(0.75); // Trigger at 75% scroll

  return (
    <section
      className={`transition-opacity duration-1000 ease-in-out ${
        reveal ? 'opacity-100 translate-y-0' : 'opacity-0 translate-y-6'
      }`}
    >
      {/* Existing tiles or animation elements */}
    </section>
  );
}
```

âœ… Removes internal state or effect bloat  
âœ… Scroll behavior now standardized  
âœ… Works on all pages with identical logic

---

### ğŸ§¼ TASK 3: Remove Duplicated Scroll Logic

| File | Action |
|------|--------|
| `src/pages/index.jsx` | ğŸ§½ Remove any `useEffect` with `scrollY` for reveal triggers |
| `src/pages/codelab.jsx` | ğŸ§½ Remove duplicated parallax or scroll threshold code |
| `components/DynamicExpansion.jsx` | ğŸ§¼ Ensure clean, trigger-based animation only |

---

## ğŸ§ª TEST CASES

| Area | Expected Result |
|------|-----------------|
| `/` (Home) | Hero loads, scroll ~75% â†’ DynamicExpansion fades in |
| `/codelab` | Legacy tiles scroll in using same behavior (optional reuse) |
| Console | No duplicate `useEffect`, no warnings |
| Code | Shared scroll logic only lives in `useScrollTrigger.js` |

---

## ğŸ“¦ FILE OUTPUTS (Post-Mission)

```plaintext
src/
â”œâ”€â”€ hooks/
â”‚   â””â”€â”€ useScrollTrigger.js        # âœ… New hook
â”œâ”€â”€ components/
â”‚   â””â”€â”€ DynamicExpansion.jsx       # âœ… Uses hook
â”œâ”€â”€ pages/
â”‚   â””â”€â”€ index.jsx                  # âœ… Uses DynamicExpansion, no scroll code
â”‚   â””â”€â”€ codelab.jsx                # âœ… (Optional) same
```

---

## âœ… MISSION SUCCESS CRITERIA

- [ ] DynamicExpansion uses shared hook
- [ ] All scroll logic unified
- [ ] No inline scroll math or `scrollY` usage
- [ ] Home and Codelab visually clean and consistent
- [ ] Console warnings removed

---

ğŸ§  This mission **cleans tech debt**, prevents future bugs, and **readies the project for animation upgrades in TILE T1.2.**

---

ğŸ›°ï¸ **Ready to transmit to Cursor.**  
